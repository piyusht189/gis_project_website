<div class="wrapper ">
    <app-navigation [current]="'hospitals'"></app-navigation>
    <div class="main-panel">
     <app-header [current]="'Hospitals - Super Admin'"></app-header>
     
      <div class="content">
        <div class="container-fluid">
            <button type="submit" class="btn btn-primary" (click)="add_hospital.open();showSearch();resetAddData()"><i class="material-icons" style="font-size:1.7em;margin: 0;
              margin-bottom: 2px;cursor:pointer;">add</i> Add Hospital</button>
          <div class="row">
            <div class="col-md-12">
              <div class="card">
                <div class="card-header card-header-primary">
                  <h4 class="card-title ">Hospitals</h4>
                  <p class="card-category"> You can add, edit and delete the hospitals</p>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table">
                      <thead class=" text-primary">
                        <th>
                          ID
                        </th>
                        <th>
                          Hospital Name
                        </th>
                        <th>
                            Hospital Admin
                          </th>
                        <th>
                          City
                        </th>
                        <th>
                          Location
                        </th>
                        <th>
                          Address
                        </th>
                        <th>
                          Phone
                        </th>
                        <th>
                          Email
                        </th>
                        <th>
                          Actions
                        </th>
                        
                      </thead>
                      <tbody>
                        <tr *ngFor="let hosp of hospitals">
                          <td>
                            {{ hosp.hid }}
                          </td>
                          <td>
                            {{ hosp.hname }}
                          </td>
                          <td>
                              {{ hosp.uname }}<br>
                              {{ hosp.uemail }}
                            </td>
                          <td>
                            {{ getCity(hosp.cid) }}
                          </td>
                          <td style="color: #022dcc;cursor: pointer;" (click)="showLocation(hosp.hlat,hosp.hlng, hosp.hname,hosp.haddress)">
                             Show on map
                          </td>
                          <td>
                            {{ hosp.haddress }}
                          </td>
                          <td>
                            {{ hosp.hphone }}
                          </td>
                          <td>
                            {{ hosp.hemail }}
                          </td>
                          <td class="td-actions text-center">
                              <button type="button" rel="tooltip" title="Edit Task" class="btn btn-primary btn-link btn-sm" (click)="editHospital(hosp)">
                                  <i class="material-icons">edit</i>
                                </button>
                                <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-link btn-sm" (click)="hosp_id = hosp.hid;confirm_delete.open()">
                                  <i class="material-icons">close</i>
                                </button>
                          </td>
                        </tr>
                        
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <footer class="footer">
        <div class="container-fluid">
          <div class="copyright float-right">
            &copy; Copyright, DriveCraft Labs
            <script>
              document.write(new Date().getFullYear())
            </script>
          </div>
        </div>
      </footer>
    </div>
  </div>


  <ngx-smart-modal #show_location identifier="show_location" class="show_location">
      <h1 style="text-align: center;height: 5%;
      margin-bottom: 20px;">Hospital Location</h1>
      <div style="height: 80%;margin-bottom: 10px;">
        <ngui-map [options]="mapOptions" (mapReady$)="onMapReady($event)" style="height: 100%;">
            <custom-marker *ngFor="let pos of hospitalLocation" [position]="pos.position"
            (click)="clicked(pos.name, pos.address)" (initialized$)="onCustomMarkerInit($event, pos['name'])"
            style="position:relative;">
            <img [src]="'../../../../assets/img/hospitalMarker.png'" style="width: 40px;" />
            <span
                style="box-shadow: 1px 1px 2px 1px #888888;border:1px solid rgb(14, 29, 53);border-radius:8px;padding:8px 5px;width:120px;background:rgb(255, 255, 255);position:absolute;top:-40px;right:40px;">
                <span style="    margin: 3px;">{{ pos.name }}</span>
                <div class="vehicle_moving"></div>
            </span>
        </custom-marker>

        <info-window id="iw">
            <div *ngIf="resetInfo" style="    width: 200px;
            padding: 12px;
            background: #b5fcff38;
            border-radius: 9px;
            font-size: 0.9em;
            overflow: hidden;
            border: 1px solid #4cc6d2;">
                <div class="col-sm-12 infocell" *ngIf="info_name" style="margin-bottom: 10px;">
                    <div class="title-soft-uppercase" style="color: #007bff;font-size: 1em;">
                        Name:
                    </div>
                    <strong *ngIf="info_name"> {{ info_name }} </strong>
                    <strong *ngIf="!info_name">NA</strong>
                </div>
                <div class="col-sm-12 infocell" *ngIf="info_address">
                    <div class="title-soft-uppercase" style="color: #007bff;font-size: 1em;">
                        Address:
                    </div>
                    <strong *ngIf="info_address"> {{ info_address }} </strong>
                    <strong *ngIf="!info_address">NA</strong>
                </div>
    
    
    
            </div>
        </info-window>
        </ngui-map>
      </div>
      <button (click)="show_location.close()" style="background: #c7c7c7;
      color: #525252;
      padding: 7px 20px;
      font-size: 1.1em;
      margin-right: 10px;
      border-radius: 25px;
      border: none;
      outline: none;
      cursor: pointer;">Close</button>
    </ngx-smart-modal>





    <ngx-smart-modal #add_hospital identifier="add_hospital" class="add_hospital">
        <h1 style="text-align: center;height: 5%;
        margin-bottom: 20px;">Add a new Hospital</h1>
        <div style="height: 80%;margin-bottom: 40px;">
            <div class="col-md-12" style="height: 100%;">
                <div class="card" style="height: 100%;display: block;
                padding-bottom: 32px;">
                  <div class="card-header card-header-primary">
                    <h4 class="card-title">Enter Hospital Details</h4>
                    <p class="card-category">Choose hospital location in map</p>
                  </div>
                  <div class="card-body" style="height: 100%;">
                    <form style="height: 100%;">
                        <div class="row" style="height: 100%;">
                            <div class="col-md-6">
                                <label style="font-size: 1.2em;
                                font-weight: 700;
                                margin-top: 10px;">Hospital Details:</label>
                                <div class="row">
                                    <div class="col-md-6">
                                      <div class="form-group">
                                        <label class="bmd-label-floating">Hospital Name</label>
                                        <input type="text" class="form-control" [(ngModel)]="hosp_name" [ngModelOptions]="{standalone: true}">
                                      </div>
                                    </div>
                                    <div class="col-md-6">
                                      <div class="form-group">
                                        <select class="form-control" [(ngModel)]="hosp_city" [ngModelOptions]="{standalone: true}" style="height: 36px;
                                        color: #6e297c;">
                                            <option [value]="''">Hospital City</option>
                                            <option  *ngFor="let city of cities" [value]="city.cid">{{ city.cname }}</option>
                                          </select>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="row">
            
                                      <div class="col-md-6">
                                          <div class="form-group">
                                            <label class="bmd-label-floating">Hospital Email</label>
                                            <input type="email" class="form-control" [(ngModel)]="hosp_email" [ngModelOptions]="{standalone: true}">
                                          </div>
                                        </div>
                                    <div class="col-md-6">
                                      <div class="form-group">
                                        <label class="bmd-label-floating">Hospital Phone</label>
                                        <input type="tel" class="form-control" [(ngModel)]="hosp_phone" [ngModelOptions]="{standalone: true}">
                                      </div>
                                    </div>
                                  </div>
                                  <div class="row">
                                      <div class="col-md-12">
                                          <div class="form-group">
                                            <label class="bmd-label-floating">Hospital Address</label>
                                            <textarea type="text" class="form-control" style="min-height: 100px;"  [(ngModel)]="hosp_address" [ngModelOptions]="{standalone: true}"></textarea>
                                          </div>
                                        </div>
                                  </div>
                                  <label style="font-size: 1.2em;
                                  font-weight: 700;
                                  margin-top: 10px;">Admin Details:</label>
                                  <div class="row">
                                      <div class="col-md-6">
                                        <div class="form-group">
                                          <label class="bmd-label-floating">Admin Name</label>
                                          <input type="text" class="form-control"  [(ngModel)]="admin_name" [ngModelOptions]="{standalone: true}">
                                        </div>
                                      </div>
                                      <div class="col-md-6">
                                        <div class="form-group">
                                          <label class="bmd-label-floating">Admin Phone</label>
                                          <input type="tel" class="form-control"  [(ngModel)]="admin_phone" [ngModelOptions]="{standalone: true}">
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                          <div class="form-group">
                                            <label class="bmd-label-floating">Admin Email</label>
                                            <input type="email" class="form-control"  [(ngModel)]="admin_email" [ngModelOptions]="{standalone: true}">
                                          </div>
                                        </div>
                                        <div class="col-md-6">
                                          <div class="form-group">
                                            <label class="bmd-label-floating">Password</label>
                                            <input type="text" class="form-control"  [(ngModel)]="admin_password" [ngModelOptions]="{standalone: true}">
                                          </div>
                                        </div>
                                      </div>
                              </div>
                              <div class="col-md-6">
                                  <label style="margin: 10px 0px;font-size: 1.2em;
                                  font-weight: 700;">Search and Pin point exact location on map.</label>
                                  <div class="row" style="height: 90%;">
                                      <div class="col-md-12">
                                          <ngui-map [options]="mapOptions" (mapReady$)="onMapReadyAdd($event)" style="height: 100%;">
                                          <img [src]="'../../../../assets/img/hospitalMarker.png'" style="width: 40px;" style="width: 40px;
                                          margin: auto;
                                          position: absolute;
                                          top: 0;
                                          left: 0;
                                          bottom: 0;
                                          right: 0;" />
            
                                              <div class="zone-search-input" style="position: absolute;
                                              right: 11px;
                                              top: 11px;">
                                                  <div>
                                                      <input placeholder="Start typing..." id="search_address"
                                                          autocorrect="off" autocapitalize="off" spellcheck="off" type="text" style="display: table-cell;
                                                          vertical-align: middle;
                                                          margin-right: 10px;
                                                          width: 350px;
                                                          height: 30px;
                                                          padding: 0px 10px;
                                                          border: 1px solid #9129ac;
                                                          border-radius: 17px;" />
                                                  </div>
                                              </div>
                                          </ngui-map>
                                        </div>
                                  </div>
                                </div>
                        </div>
                      
                     
                    </form>
                  </div>
                </div>
              </div>
        </div>
       
        <button (click)="add_hospital.close()" class="pull-right" style="background: #c7c7c7;
        color: #525252;
        padding: 11px 20px;
        font-size: 1.1em;
        margin-right: 10px;
        border-radius: 5px;
        border: none;
        outline: none;
        cursor: pointer;">Close</button>
         <button type="submit" class="btn btn-primary pull-right" style="margin: 0;
         margin-right: 12px;" (click)="add_hospital_request()">Add Hospital</button>
      </ngx-smart-modal>







      <ngx-smart-modal #edit_hospital identifier="edit_hospital" class="edit_hospital">
          <h1 style="text-align: center;height: 5%;
          margin-bottom: 20px;">Edit Hospital</h1>
          <div style="height: 80%;margin-bottom: 40px;">
              <div class="col-md-12" style="height: 100%;">
                  <div class="card" style="height: 100%;display: block;
                  padding-bottom: 32px;">
                    <div class="card-header card-header-primary">
                      <h4 class="card-title">Edit Hospital Details</h4>
                      <p class="card-category">Choose hospital location in map</p>
                    </div>
                    <div class="card-body" style="height: 100%;">
                      <form style="height: 100%;">
                          <div class="row" style="height: 100%;">
                              <div class="col-md-6">
                                  <label style="font-size: 1.2em;
                                  font-weight: 700;
                                  margin-top: 10px;">Hospital Details:</label>
                                  <div class="row">
                                      <div class="col-md-6">
                                        <div class="form-group">
                                          <label class="bmd-label-floating">Hospital Name</label>
                                          <input type="text" class="form-control" [(ngModel)]="hosp_name" [ngModelOptions]="{standalone: true}">
                                        </div>
                                      </div>
                                      <div class="col-md-6">
                                        <div class="form-group">
                                          <select class="form-control" [(ngModel)]="hosp_city" [ngModelOptions]="{standalone: true}" style="height: 36px;
                                          color: #6e297c;">
                                              <option [value]="''">Hospital City</option>
                                              <option  *ngFor="let city of cities" [value]="city.cid">{{ city.cname }}</option>
                                            </select>
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
              
                                        <div class="col-md-6">
                                            <div class="form-group">
                                              <label class="bmd-label-floating">Hospital Email</label>
                                              <input type="email" class="form-control" [(ngModel)]="hosp_email" [ngModelOptions]="{standalone: true}">
                                            </div>
                                          </div>
                                      <div class="col-md-6">
                                        <div class="form-group">
                                          <label class="bmd-label-floating">Hospital Phone</label>
                                          <input type="tel" class="form-control" [(ngModel)]="hosp_phone" [ngModelOptions]="{standalone: true}">
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                              <label class="bmd-label-floating">Hospital Address</label>
                                              <textarea type="text" class="form-control" style="min-height: 100px;"  [(ngModel)]="hosp_address" [ngModelOptions]="{standalone: true}"></textarea>
                                            </div>
                                          </div>
                                    </div>
                                    <label style="font-size: 1.2em;
                                    font-weight: 700;
                                    margin-top: 10px;">Admin Details:</label>
                                    <div class="row">
                                        <div class="col-md-6">
                                          <div class="form-group">
                                            <label class="bmd-label-floating">Admin Name</label>
                                            <input type="text" class="form-control"  [(ngModel)]="admin_name" [ngModelOptions]="{standalone: true}">
                                          </div>
                                        </div>
                                        <div class="col-md-6">
                                          <div class="form-group">
                                            <label class="bmd-label-floating">Admin Phone</label>
                                            <input type="tel" class="form-control"  [(ngModel)]="admin_phone" [ngModelOptions]="{standalone: true}">
                                          </div>
                                        </div>
                                      </div>
                                      <div class="row">
                                          <div class="col-md-6">
                                            <div class="form-group">
                                              <label class="bmd-label-floating">Admin Email</label>
                                              <input type="email" class="form-control"  [(ngModel)]="admin_email" [ngModelOptions]="{standalone: true}">
                                            </div>
                                          </div>
                                          <div class="col-md-6">
                                            <div class="form-group">
                                              <label class="bmd-label-floating">New Password</label>
                                              <input type="text" class="form-control"  [(ngModel)]="admin_password" [ngModelOptions]="{standalone: true}">
                                            </div>
                                          </div>
                                        </div>
                                </div>
                                <div class="col-md-6">
                                    <label style="margin: 10px 0px;font-size: 1.2em;
                                    font-weight: 700;">Search and Pin point exact location on map.</label>
                                    <div class="row" style="height: 90%;">
                                        <div class="col-md-12">
                                            <ngui-map [options]="mapOptions" (mapReady$)="onMapReadyEdit($event)" style="height: 100%;">
                                            <img [src]="'../../../../assets/img/hospitalMarker.png'" style="width: 40px;" style="width: 40px;
                                            margin: auto;
                                            position: absolute;
                                            top: 0;
                                            left: 0;
                                            bottom: 0;
                                            right: 0;" />
              
                                                <div class="zone-search-input" style="position: absolute;
                                                right: 11px;
                                                top: 11px;">
                                                    <div>
                                                        <input placeholder="Start typing..." id="search_address"
                                                            autocorrect="off" autocapitalize="off" spellcheck="off" type="text" style="display: table-cell;
                                                            vertical-align: middle;
                                                            margin-right: 10px;
                                                            width: 350px;
                                                            height: 30px;
                                                            padding: 0px 10px;
                                                            border: 1px solid #9129ac;
                                                            border-radius: 17px;" />
                                                    </div>
                                                </div>
                                            </ngui-map>
                                          </div>
                                    </div>
                                  </div>
                          </div>
                        
                       
                      </form>
                    </div>
                  </div>
                </div>
          </div>
         
          <button (click)="edit_hospital.close()" class="pull-right" style="background: #c7c7c7;
          color: #525252;
          padding: 11px 20px;
          font-size: 1.1em;
          margin-right: 10px;
          border-radius: 5px;
          border: none;
          outline: none;
          cursor: pointer;">Close</button>
           <button type="submit" class="btn btn-primary pull-right" style="margin: 0;
           margin-right: 12px;" (click)="edit_hospital_request()">Update Hospital</button>
        </ngx-smart-modal>






        <ngx-smart-modal #confirm_delete identifier="confirm_delete" class="confirm_delete short">
            <h1 style="text-align: center;height: 5%;
            margin-bottom: 20px;">Confirm Delete?</h1>
            <div style="margin-bottom: 30px;margin-top: 20px;">
              <p>Deleting hospital will result in deletion of all admins, users and drivers under it, Confirm to delete this hospital? </p>
            </div>
            <button (click)="confirm_delete.close()" class="pull-right" style="background: #c7c7c7;
            color: #525252;
            padding: 11px 20px;
            font-size: 1.1em;
            margin-right: 10px;
            border-radius: 5px;
            border: none;
            outline: none;
            cursor: pointer;">Cancel</button>
             <button type="submit" class="btn btn-danger pull-right" style="margin: 0;
             margin-right: 12px;" (click)="delete_hospital()">Delete Hospital</button>
          </ngx-smart-modal>